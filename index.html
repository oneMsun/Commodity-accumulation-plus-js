<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>商品累计</title>
		<style>
			body,
			ul,
			li {
				margin: 0;
				padding: 0;
				list-style: none;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="price.css" />
		<script type="text/javascript">
			window.onload = function(){
				var lists = document.querySelectorAll('.list li');
				for(var i=0;i<lists.length;i++){
					addSub(lists[i]);
				}
				function addSub(obj){
					var addBtn = obj.querySelectorAll('i')[1];
					var subBtn = obj.querySelectorAll('i')[0];
					var em = obj.querySelector('em');
					var danjia = obj.querySelectorAll('strong')[0];
					var xiaoji = obj.querySelectorAll('strong')[1];
					var num = 0;
					addBtn.onclick = function(){
						num++;
						em.innerHTML = num;
						xiaoji.innerHTML = parseFloat(danjia.innerHTML*num);	
						statistics();											
					}
					subBtn.onclick = function(){
						num--;
						if(num<0){
							num=0;
							xiaoji.innerHTML = 0;
						}
						em.innerHTML = num;
						xiaoji.innerHTML = parseFloat(danjia.innerHTML*num);
						statistics();
					}

				}

				function statistics(){
					var emLists = document.querySelectorAll('.info em');
					var em = document.querySelectorAll('.list em');
					var xiaoji = document.querySelectorAll('.list li .SS');
					var danjia = document.querySelectorAll('.list li .aa');
					// var maxPrice = emLists[2];
					var sum = 0;
					var total = 0;
					// var maxPrice = 0;
					var arr = [];
					for(var i=0;i<lists.length;i++){
						sum += parseInt(em[i].innerHTML);
						total += parseFloat(xiaoji[i].innerHTML);
						console.log(danjia[i]);
						if(parseInt(em[i].innerHTML)){
						arr[arr.length] = parseFloat(danjia[i].innerHTML);
						}
					}
					arr.sort(function(a,b){return b-a;});
					if(sum==0){
					arr[arr.length] = 0;
					}
					emLists[0].innerHTML = sum;
					emLists[1].innerHTML = total;
					emLists[2].innerHTML = arr[0];
					


				}
			}
		</script>
	</head>

	<body onselectstart="return false;">
		<div class="wrap">
			<div class="box">
				<ul class="list">
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价（元）：<strong class="aa">12.5 </strong> 小计：<strong class="SS">0</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价（元）：<strong class="aa">10.5 </strong> 小计：<strong class="SS">0</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价（元）：<strong class="aa">8.5 </strong> 小计：<strong class="SS">0</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价（元）：<strong class="aa">8 </strong> 小计：<strong class="SS">0</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价（元）：<strong class="aa">14.5 </strong> 小计：<strong class="SS">0</strong>
						</span>
					</li>
				</ul>
				<div class="info">
					<span>商品公合计：<em>0</em>件</span>
					<span>共花费了：<em>0</em>元</span>
					<br />
					<br />
					<span>其中最贵的商品单价是：<em>0</em>元</span>
				</div>
			</div>
		</div>
		<script>
			
		</script>
	</body>

</html>